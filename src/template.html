<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Almost There - TEMPLATE_TITLE</title>
  <meta content="Foundrasiers in the blockchain" name="description">
  <meta content="foundraise, kickstarter, blockchain" name="keywords">

  <!-- Favicons -->
  <link href="https://siasky.net/MAClgd30gDehzTGasNr4HSxRpNQ-t2tOjRXD0ofBIthC6g" rel="icon">
  <link href="https://siasky.net/MAClgd30gDehzTGasNr4HSxRpNQ-t2tOjRXD0ofBIthC6g" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Raleway:300,400,500,700,800" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css" integrity="sha512-+EoPw+Fiwh6eSeRK7zwIKG2MA8i3rV/DGa3tdttQGgWyatG/SkncT53KHQaS5Jh9MNOT3dmFL0FjTY08And/Cw==" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

  <!-- style.css -->
  <link href="https://siasky.net/GABexf9MkZUIQ4iZREBoV_kB3wxsodHjK8wH4pQs53vJeQ" rel="stylesheet">

</head>

<body>

	<div class="alert alert-danger preview-warning" role="alert">
	  This is a preview of your campaign!
	</div>

  <!-- ======= Header ======= -->
  <header id="header">
    <div class="container">

      <div id="logo" class="pull-left logo">
        <!-- Uncomment below if you prefer to use a text logo -->
        <!-- <h1><a href="#intro">The<span>Event</span></a></h1>-->
        <a href="/" class="scrollto"><img src="https://siasky.net/MABCAHNo_zefzM7xWBtw1slasgMtsBIiCBfAZfje5Zos2Q" alt="" title=""></a>
      </div>

      <nav class="nav-menu-container" id="nav-menu-container">
        <ul class="nav-menu">
          <li class="menu-active"><a href="#intro">Home</a></li>
          <li><a href="#about-section">About this campaign</a></li>
          <li><a href="#donate-section">Donations</a></li>
          <li><a href="#supporters-section">Supporters</a></li>
          <li class="important-section"><a href="#footer">Make your own campaign</a></li>
          
        </ul>
      </nav><!-- #nav-menu-container -->
    </div>
		
  </header><!-- End Header -->

  <!-- ======= Intro Section ======= -->
  <section id="intro" style="background-image: url(TEMPLATE_IMAGE_BG)">
    <div class="intro-container" data-aos="zoom-in" data-aos-delay="100" >

      <h1 class="mb-4 pb-0">Help TEMPLATE_WHO<br><span id="what">TEMPLATE_WHAT</span></h1>
      <p class="mb-4 pb-0">A campaign by <span id="owner">TEMPLATE_OWNER</span></p>
      <a type="button" href="#videoPopup" id="campaign-video" target="_blank" class="play-btn mb-4"></a>
      <div id="videoPopup" class="mfp-hide embed-responsive embed-responsive-21by9">
        <iframe class="embed-responsive-item" width="854" height="480" src="TEMPLATE_VIDEO" frameborder="0" allowfullscreen></iframe>
      </div>
      <a href="#about-section" class="outline-btn scrollto">Why?</a>
      <div class="countdown" id="countdown" target-date="TEMPLATE_DATE">
          <div class="row">
            <div class="countdown-item col-sm-3 col-xs-3">
              <div class="countdown-number" id="countdown-days">440</div>
              <div class="countdown-label">days</div>
            </div>

            <div class="countdown-item col-sm-3 col-xs-3">
              <div class="countdown-number" id="countdown-hours">04</div>
              <div class="countdown-label">hours</div>
            </div>

            <div class="countdown-item col-sm-3 col-xs-3">
              <div class="countdown-number" id="countdown-minutes">51</div>
              <div class="countdown-label">minutes</div>
            </div>

            <div class="countdown-item col-sm-3 col-xs-3">
              <div class="countdown-number" id="countdown-seconds">44</div>
              <div class="countdown-label">seconds</div>
            </div>
          </div>
          <h1 class="my-4 pb-0">Remaining</h1>
      </div>
    </div>
  </section><!-- End Intro Section -->

  <main id="main" class="main-sections">

    <!-- ======= About Section ======= -->
    <section id="about-section" style="background-image: url('https://siasky.net/nADwhTX42nHZSlPDEpPmWD5ASib79fq9qsylAjV58jZ0Cg')">
      <div class="container" data-aos="fade-up">
        <div class="row">
          <div class="col-lg-12">
            <h2>About This Campaign</h2>
            <p id="campaign-description">TEMPLATE_DESCRIPTION</p>
          </div>
          <img id="campaign-image" src="TEMPLATE_IMAGE">
        </div>
      </div>
    </section><!-- End About Section -->

    <!-- ======= Donate Section ======= -->
    <section id="donate-section" class="section-with-bg" style='background-image: url("https://siasky.net/_AK77HDX8G1e3Ke4Y8FIoZIa0mdchopm3Lsv1LC-MIDdHw")'
    	campaign-goal="TEMPLATE_GOAL"
    >
      <div class="container" data-aos="fade-up">

        <div class="section-header" style="margin-bottom: 5px;">
          <h2>Donations</h2>
          <h3 class="text-center">We're Almost there!</h3>
        </div>

        <div class="row">
          <div class="col-lg-12" data-aos="fade-up" data-aos-delay="100">
            <div class="row">
              <div class="col text-center my-auto">
                <h2 id="donations-info" class="mb-5"><span></span> Nears collected so far.</h2>
                <div id="progressbarMoney"></div>
                <h2 id="goal-info" class="mt-5"></h2>
              </div>
              <div class="col text-center">
                <div id="progressbarPercentage"></div>
              </div>
            </div>
          </div>
          <div class="col-lg-12" data-aos="fade-up" data-aos-delay="200">
            <div class="row mt-3">
              <div class="col text-center">
                  <h3><span id="username"></span> you can help us reach the goal!</h3>
                  <h3>
                    <a class="outline-btn outline-blue big-btn" onclick="addDonation(15)" type="button">+15!</a>
                    <a class="outline-btn outline-purple big-btn" onclick="addDonation(50)" type="button">+50!</a>
                    <a class="outline-btn big-btn" onclick="addDonation(100)" type="button">+100!</a>
                  </h3>
                  <form class="form-inline justify-content-center">
                    <input type="text" class="form-control mr-sm-2 w-50 big-input" placeholder="How much will you donate?" aria-label="donation-amount" id="donation-input" aria-describedby="basic-addon2">
                      <a class="outline-btn big-btn" onclick="donate(100)"type="button">Donate!</a>
                  </form>
              </div>
            </div>  
          </div>
        </div>
      </div>


    </section><!-- End Donate Section -->

     <!-- ======= Supporters Section ======= -->
    <section id="supporters-section" class="section-with-bg" style='background-image: url("https://siasky.net/rABIfLaqQW6kKHc1SWltDLg5N4MGOU9LYdnUtfXmlG122g")'>

      <div class="container mb-5" data-aos="fade-up">
        <div class="section-header">
          <h2>Supporters</h2>
          <h3 class="text-center">This campaign will be a success thanks to...</h3>
        </div>

       <div id="donors" class="text-center">
        
       </div>

      </div>

    </section><!-- End Sponsors Section -->

  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="footer-top">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 footer-info">
            <img src="https://siasky.net/MABCAHNo_zefzM7xWBtw1slasgMtsBIiCBfAZfje5Zos2Q" alt="AlmostThere">
            <p>Do you want to crowdfound a project of your own? With <a href="/almost-there-landing-page">Almost There</a> it's as easy as it gets. Create your own campaign and start planning. You're Almost There!</p>
            <p>Almost There, created by lunafromthemoon. Powered by <a href="https://siasky.net/">SIA</a> and <a href="https://near.org/">Near</a>.</p>
          </div>
        </div>
      </div>
    </div>

  </footer><!-- End  Footer -->

  <a href="#" class="back-to-top"><i class="fa fa-angle-up"></i></a>

  <!-- Vendor JS Files -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://siasky.net/CABb-4c65I1RkPvNrDhaWdh2ImMfr51lBiH8GAPRD9g7hQ"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
        integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
        crossorigin="anonymous"></script>

  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js" integrity="sha384-LtrjvnR4Twt/qOuYxE721u19sVFLVSA4hf/rRt6PrZTmiPltdZcI7q7PXQBYTKyf" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js" integrity="sha512-0QbL0ph8Tc8g5bLhfVzSqxe9GERORsKhIn1IrpxDAgUsbBGz/V7iSav2zzW325XGd1OMLdL4UiqRJj702IeqnQ==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/superfish/1.7.10/js/superfish.min.js" integrity="sha512-gdhtclwUZCkHSSb/Q79++RssWL4eDLKHO15TC7kR/XnvlNyzcvZDRLn4BIuxadMWGIxPuj/IbFBInMpYockVCA==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.hoverintent/1.10.1/jquery.hoverIntent.js" integrity="sha512-x0lwCyqMt8JiXukekeUKmVPe4Z6yF+fgG4bex4RE+YfYdvrjJkcg6rSVdEC/dWliYjIS+Gg/YK1uaJ/N54b5kg==" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js" integrity="sha512-IsNh5E3eYy3tr/JiX2Yx4vsCujtkhwl7SLqgnwLNgf04Hrt9BT9SXlLlZlWx+OK4ndzAoALhsMNcCmkggjZB1w==" crossorigin="anonymous"></script>
  <!-- progressbar.js -->
  <script type="text/javascript" src="https://siasky.net/JAD9Lc7d-JgWxm9q0FM62diQwT8191YNTO7ucn80_cfY5Q"></script>
  <!-- style.js -->
  <script src="https://siasky.net/CAABxphqButp3eASD561MMfj9ptsa0fPF83eYn6IrejNog" type="text/javascript"></script>

  <script type="text/javascript">
	// if (!window.ProgressBar){
	//   ProgressBar = require('progressbar.js');
	// }

	let progressbar,moneyBar;
	let totalDonations = 0;

	$(document).ready(function() {
	  initCountdown();
	  initBars();
	  initDonors();
	})

	function initCountdown() {
	 let $countdownNumbers = {
	    days: $('#countdown-days'),
	    hours: $('#countdown-hours'),
	    minutes: $('#countdown-minutes'),
	    seconds: $('#countdown-seconds')
	  };
	  var endDate = $('#countdown').attr('target-date');
	  $('#countdown').countdown(endDate, function(event) {
	    $countdownNumbers.days.text(event.offset.totalDays);
	    $countdownNumbers.hours.text(('0' + event.offset.hours).slice(-2));
	    $countdownNumbers.minutes.text(('0' + event.offset.minutes).slice(-2));
	    $countdownNumbers.seconds.text(('0' + event.offset.seconds).slice(-2));
	  });
	}

	const star = '<i class="fa fa-paper-plane-o"></i>';

	function initDonors(){

	  var isDonor = false;
	  $("#donors").html("")
	  var donations = [];
	  for (var i = 0; i < 50; i++) {
	    var total = 10;
	    if (Math.random()>0.5){
	      if (Math.random()>0.5){
	        total = 15;
	      } else {
	        if (Math.random()>0.5){
	          total = 50;
	        } else {
	          total = 100;
	        }
	      }
	    }
	    donations.push({total:total,from:`test-donor-${i}`});
	  }

	  donations.forEach(donor=>{
	    var donorClass = "small-donor";
	    if (donor.total >=100){
	      donorClass="star-donor"
	      donor.from = donor.from+star
	    } else if (donor.total >= 50){
	      donorClass="big-donor"
	    } else if (donor.total >= 15){
	      donorClass="medium-donor"
	    }
	    $("#donors").append(`<span class="${donorClass}"> ${donor.from} </span>`);
	  });
	  if (isDonor){
	    $("#supporters-section h3").html("This campaign will be a success thanks to you!<br><br>Thanks for your donation!</h3>");
	  }
	}

	function initBars(){
	  var colorZero = "#3277a8";
	  var colorComplete = "#f82249";
	  var colorTrail = '#eee';

	  var campaignGoal = parseFloat($("#donate-section").attr("campaign-goal"));
	  totalDonations = campaignGoal*0.6;

	  // var line = new ProgressBar.Line('#progressbar');
	  progressbar = new ProgressBar.Circle('#progressbarPercentage', {
	        // color: '#FCB03C',
	        duration: 3000,
	        strokeWidth: 6,
	        trailWidth: 1,
	        easing: 'easeInOut',
	        trailColor: colorTrail,
	        from: { color: colorZero },
	      to: { color: colorComplete },
	      step: function(state, progressbar, attachment) {
	          progressbar.path.setAttribute('stroke', state.color);
	          var value = Math.round(progressbar.value() * 100);
	        if (value === 0) {
	          progressbar.setText('0%');
	        } else {
	          progressbar.setText(value+"%");
	        }
	        // progressbar.text.style.color = state.color
	      },
	        svgStyle:{
	          height: '500px'
	        },
	        text: {
	          autoStyleContainer: false,
	        }
	    });

	  progressbar.text.style.fontFamily = '"Raleway", Helvetica, sans-serif';
	  progressbar.text.style.fontSize = '6rem';
	  progressbar.text.style.color = '#FFF';
	  moneyBar = new ProgressBar.Line('#progressbarMoney', {
	      // color: '#FCB03C',
	      duration: 3000,
	      strokeWidth: 6,
	      trailWidth: 1,
	      easing: 'easeInOut',
	      trailColor: colorTrail,
	      from: { color: colorZero },
	    to: { color: colorComplete },
	    step: function(state, moneyBar, attachment) {
	        moneyBar.path.setAttribute('stroke', state.color);
	        var value = Math.round(moneyBar.value() * campaignGoal);
	          $("#donations-info span").html(value)
	          $("#goal-info").html(`Only ${campaignGoal-value} more to the goal!`)
	      // moneyBar.text.style.color = state.color
	    },
	  });
	}

	window.updateBars = function updateBars(force){
	  var campaignGoal = parseFloat($("#donate-section").attr("campaign-goal"));
	  var campaignProgress = 1 - (campaignGoal - totalDonations) / campaignGoal;
	  if (campaignProgress > 1) campaignProgress = 1;
	  if (moneyBar.value() == 0 || force){
	    moneyBar.animate(campaignProgress);
	    progressbar.animate(campaignProgress,function(){
	      if (campaignGoal <= totalDonations){
	        $("#donations-info span").html(totalDonations);
	        $( "#goal-info" ).effect( "drop", {}, 500, ()=>{
	          $("#goal-info").html(`Goal reached and surpassed!`)
	          $( "#goal-info" ).removeAttr( "style" ).hide().fadeIn();
	          $("#goal-info").css("color","#f82249")
	          progressbar.text.style.color = "#f82249"
	        }) ;
	      }
	    });
	    }
	}

	window.addDonation = function(amount){
	    var previousAmount = parseFloat($('#donation-input').val());
	    if (isNaN(previousAmount)){
	        previousAmount=0;
	    }
	    $('#donation-input').val(previousAmount+amount)
	}

	window.donate = function(){
	  var amount = parseFloat($('#donation-input').val());
	  if (!isNaN(amount)){
	      totalDonations+=amount;
	      updateBars(true);
	  }
	}




  </script>

</body>

</html>